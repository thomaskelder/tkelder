<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>OpenLayers Tiled Map Service Example</title>
<link rel="stylesheet" href="../theme/default/style.css" type="text/css" />
<link rel="stylesheet" href="style.css" type="text/css" />
<script src="openlayers/lib/OpenLayers.js"></script>
<script type="text/javascript">
// I realized sometimes OpenLayers has some troubles with Opera and Safari.. :-( Advices or patch are welcome...
// Correct TMS Driver should read TileMapResource by OpenLayers.loadURL and parseXMLStringOpenLayers.parseXMLString
// For correct projection the patch for OpenLayers TMS is needed, index to tiles (both x an y) has to be rounded into integers
/* Then definition is like this:
var options = {
	controls: [],
	// maxExtent: new OpenLayers.Bounds(13.7169981668, 49.608691789, 13.9325582389, 49.7489724456),
	maxExtent: new OpenLayers.Bounds(13.71699816677651995178, 49.46841113248020604942, 13.93255823887490052471, 49.60869178902321863234),
	maxResolution: 0.00150183372679037197,
	numZoomLevels: 6,
	units: 'degrees',
	projection: "EPSG:4326"
};
map = new OpenLayers.Map("map", options);
*/

/*
maxExtent: new OpenLayers.Bounds(0,0,4096,4096),
maxResolution:4096 / 256,
numZoomLevels:5
*/

var map, layer;
/*
Handler = {};
Handler.test = function(callback) {
	alert("hoi");
};
Handler.error = function(callback) {
	alert("error");
};

function init() {
	queryTMS("http://localhost:8180/SvgTileServer/", "WP140.svg");
}

function parseTMS(response) {
	var doc = OpenLayers.parseXml(response.responseText);
	return " ";
}

function setTMS(url, layerOptions, mapOptions) {
	map = new OpenLayers.Map( 'map', mapOptions);
	layer = new OpenLayers.Layer.TMS( "TMS", url, layerOptions );
	map.addLayer(layer);
	map.setBaseLayer(layer);
}

function queryTMS(url, layer) {
	if(!url || !layer) {
		url = OpenLayers.Util.getElement('url').value;
		layer = OpenLayers.Util.getElement('layer').value;
	}
	var u = url + "1.0.0/" + layer;
	u = "http://localhost/wikipathways";
	sajax_do_call(u, Handler.test);
}
*/

function init() {
	var options = {
			maxExtent: new OpenLayers.Bounds(0, 0, 5452, 5452),
			maxResolution: 16,
			numZoomLevels: 5,
			units: 'pixels',
	}
	
	map = new OpenLayers.Map( 'map', options);
	layer = new OpenLayers.Layer.TMS( "TMS",
		"http://localhost:8180/SvgTileServer/TileServer", {layername: 'WP140.svg', type: 'png'} );
	map.addLayer(layer);
	map.setCenter(new OpenLayers.LonLat(1, 1), 1);
}

function addTMS() {
	l = new OpenLayers.Layer.TMS(
	"TMS",
	OpenLayers.Util.getElement('url').value, {
		'layername': OpenLayers.Util.getElement('layer').value,
		'type': 'png'
		}
	);
	map.addLayer(l);
	map.setBaseLayer(l);
}

</script>
</head>
<body onload="init()">
<h1 id="title">Tiled Map Service Example</h1>

<div id="tags"></div>

<p id="shortdesc">Demonstrate the initialization and modification of
a Tiled Map Service layer.</p>

<div id="map" class="smallmap"></div>

<div id="docs">URL of TMS (Should end in /): <input type="text"
	id="url" size="60" value="http://localhost:8180/SvgTileServer/TileServer" />
layer_name <input type="text" id="layer" value="WP140.svg" /><input
	type="submit" onclick="queryTMS()" /><br />
<p>Example: http://labs.metacarta.com/wms-c/Basic.py/, satellite,
jpg<br />
The first input must be an HTTP URL pointing to a TMS instance. The
second input must be a layer name available from that instance, and the
third must be the output format used by that layer. (Any other behavior
will result in broken images being displayed.)</p>
</div>
</body>
</html>

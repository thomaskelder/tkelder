This directory contains several scripts and utilities for finding interactions between pathways in the context of a given experimental dataset. This file documents those scripts used in the analysis of the NuGO pps2 dataset.
-Thomas Kelder (thomaskelder@gmail.com), 2011

=== Directory structure ===
The commands listed below for the java utilities and the R scripts assume the following directory structure for the data files. If you deviate from this structure, you need to customize the commands and update the paths in the R-scripts.

/yourpath
	/input
		/pathways                #Contains the pathway files
		/pathways_merged         #Contains the mapped and merged pathways (generated by java utilities, see below)
		/interactions            #Contain the gml files from the interaction networks
			/mouse-directed       #Directed networks for mouse (this path is used in the scripts for the pps2 analysis)
		/idm                     #The bridgedb idmapper files
		/weights                 #The files containing the edge weights (pps2 gene expression data)
	/output                     #Output from AnalyzeShortestPathPPS2.R will be saved here
		/images                  #Images from AnalyzeShortestPathPPS2.R will be saved here
	/scripts                    #The location of the R scripts
	/data                       #The original data from the interaction providers

All the R scripts assume that the working directory of the current R session is /yourpath.

=== Java utilities ===
This section covers several java utitilies that were used to prepare the input data.

The jar containing the necessary classes can be compiled by running the following command from the directory containing the code:

ant jar

== org.pct.util.PathwayOverlap ==
Used to map all gene/protein/metabolite identifiers in a set of GPML pathways to a set of unified datasources (e.g. Ensembl for genes and Chebi for metabolites).

Command used in pps2 analysis:

java -cp pct.jar org.pct.util.PathwayOverlap -p input/pathways --idm idmapper-pgdb:idm/Mm_Derby_20090720.bridge --ds EnMm --mergeThreshold 0.75 -o input/pathways_merged

==  pct.jar org.pct.conversion.StitchStringImporter ==
Used to convert a flatfile from the STRING or STITCH database to a .gml network file, while also mapping the proteins and chemicals to a set of unified identifiers.

Comand used in pps2 analysis:

java -cp pct.jar org.pct.conversion.StitchStringImporter --idm idmapper-pgdb:idm/Mm_Derby_20090720.bridge --ds EnMm --ens data/string/biomart_ens_gene2protein46.txt data/string/biomart_ens_gene2protein56.txt data/string/biomart_ens_gene2protein57.txt data/string/biomart_ens_gene2protein58.txt --species "Mus musculus" --excludeSources NLP --in data/string/protein.actions.detailed.v8.3.txt --out input/interactions/mouse-directed/string.mouse.400.dir.gml

NOTE: The files named biomart_ens_gene2proteinXX.txt are BioMART exports Ensembl, necessary because the BridgeDb databases don't contain the Ensembl peptide IDs. These files contain the Ensembl gene ID in the first column and Ensembl peptide ID in the second. Note that several versions of Ensembl are used, this is because STRING often uses outdated peptide identifiers that are superseded in newer versions of Ensembl.

== org.pct.scripts.PathwaysToNetwork ==
Used to generate a .gml network from a collection of GPML files. This script extract the interactions and maps identifiers to a unified set of datasources.

Command used in pps2 analysis:
java -cp pct.jar org.pct.scripts.PathwaysToNetwork -p input/pathways --idm idmapper-pgdb:idm/Mm_Derby_20090720.bridge --ds EnMm -o input/interactions/mouse-directed/gpml_interactions.gml

== org.pct.conversion.PazarImporter ==
Used to convert parsed Pazar files to a .gml network. This scripts imports tab delimited text files generated from Pazar XML using the script at http://code.google.com/p/tkelder/source/browse/#svn/trunk/scripts/groovy/pazar_parser.

java -cp pct.jar org.pct.conversion.PazarImporter -i data/pazar -o input/interactions/mouse-directed/

=== R scripts ===
The following R scripts were used to run the pps2 analysis (they may depend on other scripts in the directory):

1. ShortestPathFirstRun.R: Loads the data and runs the calculation on the original data and the first set of 100 permutations.
2. ShortestPathSecondRun.R: Runs second set of 1000 permutations on interactions with p-value <= 0.1. This script depends on the output of 1.
3. AnalyzeShortestPathPPS2.R: The script used to generate filtered networks and figures for the manuscript. This script depends on the output of 1 and 2.

 
